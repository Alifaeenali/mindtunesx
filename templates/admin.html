<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - MindTune Innovations</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .team-member-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
            gap: 15px;
        }
        
        .team-member-image-preview {
            margin-left: 15px;
            flex-shrink: 0;
        }
        
        .team-member-image-preview img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
        }
        .file-preview {
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .file-preview img, .file-preview video {
            max-width: 200px;
            max-height: 150px;
            border-radius: 5px;
            display: block;
            margin: 5px 0;
        }
        .media-type-selector {
            margin-bottom: 15px;
        }
        .media-type-selector label {
            margin-right: 15px;
            font-weight: normal;
        }
        .client-logos-section, .dynamic-section, .services-section {
            border: 1px solid #e0e0e0;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
            background-color: #fafafa;
        }
        .client-logo-item, .founder-item, .work-item, .service-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: white;
            gap: 15px;
        }
        .client-logo-preview, .founder-image-preview {
            margin-left: 15px;
            flex-shrink: 0;
        }
        .client-logo-preview img, .founder-image-preview img {
            width: 80px;
            height: 60px;
            object-fit: contain;
            border-radius: 3px;
        }
        .add-btn, .remove-btn {
            background: #ff00d9ff;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 3px;
            cursor: pointer;
            margin: 5px;
        }
        .remove-btn {
            background: #dc3545;
        }
        .add-btn:hover {
            background: #0056b3;
        }
        .remove-btn:hover {
            background: #a71e2a;
        }
        .service-item .form-group {
            flex: 1;
        }
        .service-item .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .service-item .form-group input[type="text"] {
            width: 100%;
            margin-bottom: 10px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .service-item .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 3px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <nav class="admin-sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-cog"></i> Admin Panel</h2>
            </div>

            <ul class="sidebar-menu">
                <li>
                    <a href="{{ url_for('admin', section='nav') }}" 
                       class="{{ 'active' if current_section == 'nav' else '' }}">
                        <i class="fas fa-navigation"></i> Navigation
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='hero') }}" 
                       class="{{ 'active' if current_section == 'hero' else '' }}">
                        <i class="fas fa-home"></i> Hero Section
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='clients') }}" 
                       class="{{ 'active' if current_section == 'clients' else '' }}">
                        <i class="fas fa-users"></i> Our Clients
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='about_us') }}" 
                       class="{{ 'active' if current_section == 'about_us' else '' }}">
                        <i class="fas fa-info-circle"></i> About Us
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='innovations') }}" 
                       class="{{ 'active' if current_section == 'innovations' else '' }}">
                        <i class="fas fa-lightbulb"></i> Innovations
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='know') }}" 
                       class="{{ 'active' if current_section == 'know' else '' }}">
                        <i class="fas fa-brain"></i> Know Section
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='statistics') }}" 
                       class="{{ 'active' if current_section == 'statistics' else '' }}">
                        <i class="fas fa-chart-bar"></i> Statistics
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='services') }}" 
                       class="{{ 'active' if current_section == 'services' else '' }}">
                        <i class="fas fa-cogs"></i> Services
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin_blogs') }}" 
                    class="{{ 'active' if current_section == 'blogs' else '' }}">
                        <i class="fas fa-newspaper"></i> Blog Management
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin_jobs') }}">
                        <i class="fas fa-briefcase"></i> Job Management
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin_applications') }}">
                        <i class="fas fa-file-alt"></i> Job Applications
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='footer') }}" 
                       class="{{ 'active' if current_section == 'footer' else '' }}">
                        <i class="fas fa-link"></i> Footer
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('admin', section='contact_submissions') }}" 
                       class="{{ 'active' if current_section == 'contact_submissions' else '' }}">
                        <i class="fas fa-envelope"></i> Contact Submissions
                    </a>
                </li>
            </ul>

        </nav>

        <main class="admin-main">
            <div class="admin-header">
                <h1>{{ section_titles.get(current_section, 'Admin Panel') }}</h1>
                <div class="admin-breadcrumb">
                    <span>Admin</span> <i class="fas fa-chevron-right"></i> 
                    <span>{{ section_titles.get(current_section, 'Dashboard') }}</span>
                </div>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="flash-messages">
                        {% for category, message in messages %}
                            <div class="flash-message flash-{{ category }}">
                                <i class="fas {{ 'fa-check-circle' if category == 'success' else 'fa-exclamation-triangle' if category == 'warning' else 'fa-times-circle' }}"></i>
                                <span>{{ message }}</span>
                                <button class="flash-close" onclick="this.parentElement.remove()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            <div class="admin-content">
                {% if current_section == 'nav' %}
                    <form method="POST" enctype="multipart/form-data" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-navigation"></i> Navigation Settings</h3>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="navLogo">Logo Upload</label>
                                    <input type="file" id="navLogo" name="navLogo" accept="image/*">
                                    {% if data.get('navLogo') %}
                                        <div class="file-preview">
                                            <p>Current Logo:</p>
                                            <img src="{{ data.get('navLogo') }}" alt="Current Logo">
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="form-group">
                                    <label for="navAnchor1">Nav Link 1</label>
                                    <input type="text" id="navAnchor1" name="navAnchor1" 
                                           value="{{ data.get('navAnchor1', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="navAnchor2">Nav Link 2</label>
                                    <input type="text" id="navAnchor2" name="navAnchor2" 
                                           value="{{ data.get('navAnchor2', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="navAnchor3">Nav Link 3</label>
                                    <input type="text" id="navAnchor3" name="navAnchor3" 
                                           value="{{ data.get('navAnchor3', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="navAnchor4">Nav Link 4</label>
                                    <input type="text" id="navAnchor4" name="navAnchor4" 
                                           value="{{ data.get('navAnchor4', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="navAnchor5">Nav Link 5</label>
                                    <input type="text" id="navAnchor5" name="navAnchor5" 
                                           value="{{ data.get('navAnchor5', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="navAnchor6">Nav Link 6</label>
                                    <input type="text" id="navAnchor6" name="navAnchor6" 
                                           value="{{ data.get('navAnchor6', '') }}" required>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Navigation
                        </button>
                    </form>

                {% elif current_section == 'hero' %}
                    <form method="POST" enctype="multipart/form-data" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-home"></i> Hero Section</h3>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="heroImg">Hero Image Upload</label>
                                    <input type="file" id="heroImg" name="heroImg" accept="image/*">
                                    {% if data.get('heroImg') %}
                                        <div class="file-preview">
                                            <p>Current Hero Image:</p>
                                            <img src="{{ data.get('heroImg') }}" alt="Current Hero Image">
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="form-group full-width">
                                    <label for="heroHead">Hero Heading</label>
                                    <input type="text" id="heroHead" name="heroHead" 
                                           value="{{ data.get('heroHead', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="heroDesc">Hero Description</label>
                                    <textarea id="heroDesc" name="heroDesc" rows="5" required>{{ data.get('heroDesc', '') }}</textarea>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Hero Section
                        </button>
                    </form>

                {% elif current_section == 'clients' %}
                    <form method="POST" enctype="multipart/form-data" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-users"></i> Our Clients Section</h3>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="clientHead">Client Section Heading</label>
                                    <input type="text" id="clientHead" name="clientHead" 
                                           value="{{ data.get('clientHead', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="clientDesc">Client Section Description</label>
                                    <textarea id="clientDesc" name="clientDesc" rows="3" required>{{ data.get('clientDesc', '') }}</textarea>
                                </div>
                            </div>
                            <div class="client-logos-section">
                                <h4>Client Logos</h4>
                                <div id="clientLogosContainer">
                                    {% for i in range(client_logos|length) %}
                                        <div class="client-logo-item">
                                            <div class="form-group" style="flex: 1;">
                                                <label for="clientLogo{{ i + 1 }}">Client Logo {{ i + 1 }}</label>
                                                <input type="file" id="clientLogo{{ i + 1 }}" name="clientLogo{{ i + 1 }}" accept="image/*">
                                                <input type="hidden" name="existingLogoUrl" value="{{ client_logos[i] }}">
                                            </div>
                                            {% if client_logos[i] %}
                                                <div class="client-logo-preview">
                                                    <img src="{{ client_logos[i] }}" alt="Client Logo {{ i + 1 }}">
                                                </div>
                                            {% endif %}
                                            <button type="button" class="remove-btn" onclick="removeClientLogo(this)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    {% endfor %}
                                    {% if not client_logos %}
                                        <div class="client-logo-item">
                                            <div class="form-group" style="flex: 1;">
                                                <label for="clientLogo1">Client Logo 1</label>
                                                <input type="file" id="clientLogo1" name="clientLogo1" accept="image/*">
                                            </div>
                                            <button type="button" class="remove-btn" onclick="removeClientLogo(this)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    {% endif %}
                                </div>
                                <button type="button" class="add-btn" onclick="addClientLogo()">
                                    <i class="fas fa-plus"></i> Add More Logo
                                </button>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Clients Section
                        </button>
                    </form>

                {% elif current_section == 'about_us' %}
                    <form method="POST" enctype="multipart/form-data" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-info-circle"></i> About Us Page Content</h3>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="about_head">Main Title</label>
                                    <input type="text" id="about_head" name="about_head" value="{{ data.get('about_head', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="about_desc">Main Description</label>
                                    <textarea id="about_desc" name="about_desc" rows="5" required>{{ data.get('about_desc', '') }}</textarea>
                                </div>
                                <div class="form-group full-width">
                                    <label for="aboutHeroImage">Hero Image Upload</label>
                                    <input type="file" id="aboutHeroImage" name="aboutHeroImage" accept="image/*">
                                    <input type="hidden" name="existingAboutHeroImage" value="{{ data.get('aboutHeroImage', '') }}">
                                    {% if data.get('aboutHeroImage') %}
                                        <div class="file-preview">
                                            <p>Current Hero Image:</p>
                                            <img src="{{ data.get('aboutHeroImage') }}" alt="Current About Hero Image">
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="form-group full-width">
                                    <label for="about_title">Section Title</label>
                                    <input type="text" id="about_title" name="about_title" value="{{ data.get('about_title', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="about_subtitle">Section Subtitle</label>
                                    <input type="text" id="about_subtitle" name="about_subtitle" value="{{ data.get('about_subtitle', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="about_secondary_desc">Secondary Description</label>
                                    <textarea id="about_secondary_desc" name="about_secondary_desc" rows="5" required>{{ data.get('about_secondary_desc', '') }}</textarea>
                                </div>
                                <div class="form-group full-width">
                                    <label for="achievement_title">Achievement Banner Title</label>
                                    <input type="text" id="achievement_title" name="achievement_title" value="{{ data.get('achievement_title', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="achievement_subtitle">Achievement Banner Subtitle</label>
                                    <textarea id="achievement_subtitle" name="achievement_subtitle" rows="3" required>{{ data.get('achievement_subtitle', '') }}</textarea>
                                </div>
                            </div>
<div class="dynamic-section">
    <h3>Founders</h3>
    <div id="foundersContainer">
        {% for founder in founders %}
        <div class="founder-item" data-index="{{ loop.index0 }}">
            <div class="form-group" style="flex: 1;">
                <label>Founder Name</label>
                <input type="text" name="founder_name" value="{{ founder.founder_name }}" required>
                
                <label>Founder Role</label>
                <input type="text" name="founder_role" value="{{ founder.founder_role }}" required>
                
                <label>Founder Description</label>
                <textarea name="founder_description" rows="3" required>{{ founder.founder_description }}</textarea>
                
                <label>Founder Image</label>
                <input type="file" name="founder_image_{{ loop.index0 }}" accept="image/*" onchange="previewFounderImage(this, {{ loop.index0 }})">
                <input type="hidden" name="existing_founder_image" value="{{ founder.founder_image }}">
                
                {% if founder.founder_image %}
                <small class="current-file">Current: {{ founder.founder_image.split('/')[-1] }}</small>
                {% endif %}
            </div>
            <div class="founder-image-preview">
                {% if founder.founder_image %}
                <img src="{{ founder.founder_image }}" alt="{{ founder.founder_name }}" id="founder_preview_{{ loop.index0 }}">
                {% else %}
                <img src="/static/images/placeholder-person.jpg" alt="No image" id="founder_preview_{{ loop.index0 }}" style="opacity: 0.5;">
                {% endif %}
            </div>
            <button type="button" class="remove-btn" onclick="removeFounder(this)">
                <i class="fas fa-trash"></i>
            </button>
        </div>
        {% endfor %}
    </div>
    <button type="button" class="add-btn" onclick="addFounder()">
        <i class="fas fa-plus"></i> Add Founder
    </button>
</div>
                            <div class="dynamic-section">
                                <h3>Who We Work With</h3>
                                <div id="workWithContainer">
                                    {% for work in work_with %}
                                    <div class="work-item">
                                        <div class="form-group" style="flex: 1;">
                                            <label>Icon (e.g., fa-solid fa-code)</label>
                                            <input type="text" name="work_icon" value="{{ work.work_icon }}" required>
                                            <label>Title</label>
                                            <input type="text" name="work_title" value="{{ work.work_title }}" required>
                                            <label>Description</label>
                                            <textarea name="work_description" rows="3" required>{{ work.work_description }}</textarea>
                                        </div>
                                        <button type="button" class="remove-btn" onclick="removeWorkItem(this)">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                    {% endfor %}
                                </div>
                                <button type="button" class="add-btn" onclick="addWorkItem()">
                                    <i class="fas fa-plus"></i> Add Item
                                </button>
                            </div>
                        </div>
                        <div class="dynamic-section">
                            <h3>Team Members</h3>
                            <div id="teamMembersContainer">
                                {% for member in team_members %}
                                <div class="team-member-item">
                                    <div class="form-group" style="flex: 1;">
                                        <label>Member Name</label>
                                        <input type="text" name="team_member_name" value="{{ member.member_name }}" required>
                                        <label>Member Position</label>
                                        <input type="text" name="team_member_position" value="{{ member.member_position }}" required>
                                        <label>Member Description</label>
                                        <textarea name="team_member_description" rows="3" required>{{ member.member_description }}</textarea>
                                        <label>Member Image</label>
                                        <input type="file" name="team_member_image_{{ loop.index0 }}" accept="image/*">
                                        <input type="hidden" name="existing_team_member_image" value="{{ member.member_image }}">
                                    </div>
                                    <div class="team-member-image-preview">
                                        <img src="{{ member.member_image }}" alt="{{ member.member_name }}">
                                    </div>
                                    <button type="button" class="remove-btn" onclick="removeTeamMember(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                {% endfor %}
                                {% if not team_members %}
                                <div class="team-member-item">
                                    <div class="form-group" style="flex: 1;">
                                        <label>Member Name</label>
                                        <input type="text" name="team_member_name" required>
                                        <label>Member Position</label>
                                        <input type="text" name="team_member_position" required>
                                        <label>Member Description</label>
                                        <textarea name="team_member_description" rows="3" required></textarea>
                                        <label>Member Image</label>
                                        <input type="file" name="team_member_image_0" accept="image/*">
                                    </div>
                                    <button type="button" class="remove-btn" onclick="removeTeamMember(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                                {% endif %}
                            </div>
                            <button type="button" class="add-btn" onclick="addTeamMember()">
                                <i class="fas fa-plus"></i> Add Team Member
                            </button>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update About Us
                        </button>
                    </form>

                {% elif current_section == 'innovations' %}
                    <form method="POST" enctype="multipart/form-data" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-lightbulb"></i> Innovations Section</h3>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="innovationSubHead">Sub-heading</label>
                                    <input type="text" id="innovationSubHead" name="innovationSubHead" 
                                           value="{{ data.get('innovationSubHead', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="innovationHead">Main Heading</label>
                                    <input type="text" id="innovationHead" name="innovationHead" 
                                           value="{{ data.get('innovationHead', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="innovationDescp">Description</label>
                                    <textarea id="innovationDescp" name="innovationDescp" rows="3" required>{{ data.get('innovationDescp', '') }}</textarea>
                                </div>
                                <div class="form-group">
                                    <label for="innovationl1">List Item 1</label>
                                    <textarea id="innovationl1" name="innovationl1" rows="2" required>{{ data.get('innovationl1', '') }}</textarea>
                                </div>
                                <div class="form-group">
                                    <label for="innovationl2">List Item 2</label>
                                    <textarea id="innovationl2" name="innovationl2" rows="2" required>{{ data.get('innovationl2', '') }}</textarea>
                                </div>
                                <div class="form-group">
                                    <label for="innovationl3">List Item 3</label>
                                    <textarea id="innovationl3" name="innovationl3" rows="2" required>{{ data.get('innovationl3', '') }}</textarea>
                                </div>
                                <div class="form-group">
                                    <label for="innovationl4">List Item 4</label>
                                    <textarea id="innovationl4" name="innovationl4" rows="2" required>{{ data.get('innovationl4', '') }}</textarea>
                                </div>
                                <div class="form-group full-width">
                                    <div class="media-type-selector">
                                        <label>Media Type:</label>
                                        <input type="radio" id="innovationTypeImage" name="innovationMediaType" value="image" 
                                               {{ 'checked' if data.get('innovationMediaType', 'image') == 'image' else '' }}>
                                        <label for="innovationTypeImage">Image</label>
                                        <input type="radio" id="innovationTypeVideo" name="innovationMediaType" value="video" 
                                               {{ 'checked' if data.get('innovationMediaType') == 'video' else '' }}>
                                        <label for="innovationTypeVideo">Video</label>
                                    </div>
                                    <label for="innovationFile">Upload Image or Video</label>
                                    <input type="file" id="innovationFile" name="innovationFile" accept="image/*,video/*">
                                    {% if data.get('innovationMediaType') == 'image' and data.get('innovationImage') %}
                                        <div class="file-preview">
                                            <p>Current Image:</p>
                                            <img src="{{ data.get('innovationImage') }}" alt="Innovation Image">
                                        </div>
                                    {% elif data.get('innovationMediaType') == 'video' and data.get('innovationVideo') %}
                                        <div class="file-preview">
                                            <p>Current Video:</p>
                                            <video src="{{ data.get('innovationVideo') }}" controls></video>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Innovations Section
                        </button>
                    </form>

                {% elif current_section == 'know' %}
                    <form method="POST" enctype="multipart/form-data" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-brain"></i> Know Section</h3>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="knowHead">Main Heading</label>
                                    <input type="text" id="knowHead" name="knowHead" 
                                           value="{{ data.get('knowHead', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="knowDescp">Description</label>
                                    <textarea id="knowDescp" name="knowDescp" rows="3" required>{{ data.get('knowDescp', '') }}</textarea>
                                </div>
                                <div class="form-group full-width">
                                    <div class="media-type-selector">
                                        <label>Media Type:</label>
                                        <input type="radio" id="knowTypeImage" name="knowMediaType" value="image" 
                                               {{ 'checked' if data.get('knowImage') and not data.get('knowVideo') else '' }}>
                                        <label for="knowTypeImage">Image</label>
                                        <input type="radio" id="knowTypeVideo" name="knowMediaType" value="video" 
                                               {{ 'checked' if data.get('knowVideo') else '' }}>
                                        <label for="knowTypeVideo">Video</label>
                                    </div>
                                    <label for="knowFile">Upload Image or Video</label>
                                    <input type="file" id="knowFile" name="knowFile" accept="image/*,video/*">
                                    {% if data.get('knowImage') %}
                                        <div class="file-preview">
                                            <p>Current Image:</p>
                                            <img src="{{ data.get('knowImage') }}" alt="Know Image">
                                        </div>
                                    {% elif data.get('knowVideo') %}
                                        <div class="file-preview">
                                            <p>Current Video:</p>
                                            <video src="{{ data.get('knowVideo') }}" controls></video>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Know Section
                        </button>
                    </form>

                {% elif current_section == 'statistics' %}
                    <form method="POST" enctype="multipart/form-data" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-chart-bar"></i> Statistics Section</h3>
                            <div class="form-grid">
                                <div class="form-group full-width">
                                    <label for="statHead">Main Heading</label>
                                    <input type="text" id="statHead" name="statHead" 
                                           value="{{ data.get('statHead', '') }}" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="statDescp">Description</label>
                                    <textarea id="statDescp" name="statDescp" rows="3" required>{{ data.get('statDescp', '') }}</textarea>
                                </div>
                                <div class="form-group">
                                    <label for="headCard1">Card 1 Heading</label>
                                    <input type="text" id="headCard1" name="headCard1" value="{{ data.get('headCard1', '') }}" required>
                                    <label for="DescCard1">Card 1 Description</label>
                                    <input type="text" id="DescCard1" name="DescCard1" value="{{ data.get('DescCard1', '') }}" required>
                                    <label for="ImgCard1">Card 1 Icon</label>
                                    <input type="file" id="ImgCard1" name="ImgCard1" accept="image/*">
                                    {% if data.get('ImgCard1') %}
                                        <div class="file-preview">
                                            <p>Current Icon:</p>
                                            <img src="{{ data.get('ImgCard1') }}" alt="Card 1 Icon">
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="form-group">
                                    <label for="headCard2">Card 2 Heading</label>
                                    <input type="text" id="headCard2" name="headCard2" value="{{ data.get('headCard2', '') }}" required>
                                    <label for="DescCard2">Card 2 Description</label>
                                    <input type="text" id="DescCard2" name="DescCard2" value="{{ data.get('DescCard2', '') }}" required>
                                    <label for="ImgCard2">Card 2 Icon</label>
                                    <input type="file" id="ImgCard2" name="ImgCard2" accept="image/*">
                                    {% if data.get('ImgCard2') %}
                                        <div class="file-preview">
                                            <p>Current Icon:</p>
                                            <img src="{{ data.get('ImgCard2') }}" alt="Card 2 Icon">
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="form-group">
                                    <label for="headCard3">Card 3 Heading</label>
                                    <input type="text" id="headCard3" name="headCard3" value="{{ data.get('headCard3', '') }}" required>
                                    <label for="DescCard3">Card 3 Description</label>
                                    <input type="text" id="DescCard3" name="DescCard3" value="{{ data.get('DescCard3', '') }}" required>
                                    <label for="ImgCard3">Card 3 Icon</label>
                                    <input type="file" id="ImgCard3" name="ImgCard3" accept="image/*">
                                    {% if data.get('ImgCard3') %}
                                        <div class="file-preview">
                                            <p>Current Icon:</p>
                                            <img src="{{ data.get('ImgCard3') }}" alt="Card 3 Icon">
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Statistics
                        </button>
                    </form>

                {% elif current_section == 'services' %}
                    <form method="POST" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-cogs"></i> Services Management</h3>
                            <p style="margin-bottom: 20px; padding: 10px; background: #e3f2fd; border-radius: 5px; border-left: 4px solid #2196f3;">
                                <strong>Icon Guide:</strong> Use FontAwesome classes like "fas fa-laptop-code", "fas fa-mobile-alt", "fas fa-cloud", etc. 
                                <a href="https://fontawesome.com/icons" target="_blank" style="color: #1976d2;">Browse icons here</a>
                            </p>
                            <div class="services-section">
                                <div id="servicesContainer">
                                    {% for service in services %}
                                    <div class="service-item">
                                        <div class="form-group">
                                            <label>Service Heading</label>
                                            <input type="text" name="service_head" value="{{ service.service_head }}" required>
                                            
                                            <label>Service Icon</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="text" name="service_icon" value="{{ service.service_icon or 'fas fa-cogs' }}" placeholder="fas fa-cogs" required style="flex: 1;">
                                                <div class="icon-preview" style="min-width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; background: #f5f5f5; border-radius: 5px; border: 1px solid #ddd;">
                                                    <i class="{{ service.service_icon or 'fas fa-cogs' }}" style="font-size: 18px; color: #333;"></i>
                                                </div>
                                            </div>
                                            <small style="color: #666; font-size: 12px;">Examples: fas fa-laptop-code, fas fa-mobile-alt, fas fa-cloud, fas fa-shield-alt</small>
                                            
                                            <label>Service Description</label>
                                            <textarea name="service_desc" rows="3" required>{{ service.service_desc }}</textarea>
                                        </div>
                                        <button type="button" class="remove-btn" onclick="removeService(this)"><i class="fas fa-trash"></i></button>
                                    </div>
                                    {% endfor %}
                                    {% if not services %}
                                    <div class="service-item">
                                        <div class="form-group">
                                            <label>Service Heading</label>
                                            <input type="text" name="service_head" required>
                                            
                                            <label>Service Icon</label>
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                <input type="text" name="service_icon" value="fas fa-cogs" placeholder="fas fa-cogs" required style="flex: 1;">
                                                <div class="icon-preview" style="min-width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; background: #f5f5f5; border-radius: 5px; border: 1px solid #ddd;">
                                                    <i class="fas fa-cogs" style="font-size: 18px; color: #333;"></i>
                                                </div>
                                            </div>
                                            <small style="color: #666; font-size: 12px;">Examples: fas fa-laptop-code, fas fa-mobile-alt, fas fa-cloud, fas fa-shield-alt</small>
                                            
                                            <label>Service Description</label>
                                            <textarea name="service_desc" rows="3" required></textarea>
                                        </div>
                                        <button type="button" class="remove-btn" onclick="removeService(this)"><i class="fas fa-trash"></i></button>
                                    </div>
                                    {% endif %}
                                </div>
                                <button type="button" class="add-btn" onclick="addService()">
                                    <i class="fas fa-plus"></i> Add Service
                                </button>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Services
                        </button>
                    </form>




                {% elif current_section == 'footer' %}
                    <form method="POST" class="admin-form">
                        <div class="form-section">
                            <h3><i class="fas fa-link"></i> Footer Links</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="ftr_link1">Link 1</label>
                                    <input type="text" id="ftr_link1" name="ftr_link1" 
                                           value="{{ data.get('ftr_link1', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="ftr_link2">Link 2</label>
                                    <input type="text" id="ftr_link2" name="ftr_link2" 
                                           value="{{ data.get('ftr_link2', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="ftr_link3">Link 3</label>
                                    <input type="text" id="ftr_link3" name="ftr_link3" 
                                           value="{{ data.get('ftr_link3', '') }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="ftr_link4">Link 4</label>
                                    <input type="text" id="ftr_link4" name="ftr_link4" 
                                           value="{{ data.get('ftr_link4', '') }}" required>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Footer
                        </button>
                    </form>
                
                {% elif current_section == 'contact_submissions' %}
                <div class="form-section">
                    <h3><i class="fas fa-envelope"></i> Contact Submissions</h3>
                    {% if contact_submissions %}
                        <div style="overflow-x: auto;">
                            <table class="data-table" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                                <thead>
                                    <tr style="background-color: #f8f9fa;">
                                        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">ID</th>
                                        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">Name</th>
                                        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">Email</th>
                                        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">Subject</th>
                                        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">Message</th>
                                        <th style="padding: 12px; border: 1px solid #ddd; text-align: left;">Date</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for submission in contact_submissions %}
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #ddd;">{{ submission.id }}</td>
                                        <td style="padding: 12px; border: 1px solid #ddd;">{{ submission.name }}</td>
                                        <td style="padding: 12px; border: 1px solid #ddd;">
                                            <a href="mailto:{{ submission.email }}">{{ submission.email }}</a>
                                        </td>
                                        <td style="padding: 12px; border: 1px solid #ddd;">{{ submission.subject }}</td>
                                        <td style="padding: 12px; border: 1px solid #ddd; max-width: 300px;">
                                            <div style="max-height: 100px; overflow-y: auto; white-space: pre-wrap;">{{ submission.message }}</div>
                                        </td>
                                        <td style="padding: 12px; border: 1px solid #ddd;">
                                            {{ submission.submission_date.strftime('%Y-%m-%d %H:%M') if submission.submission_date else 'N/A' }}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div style="margin-top: 20px; padding: 15px; background-color: #e7f3ff; border-radius: 5px;">
                            <p><strong>Total Submissions:</strong> {{ contact_submissions|length }}</p>
                            <p><em>Click on email addresses to send replies directly.</em></p>
                        </div>
                    {% else %}
                        <div style="text-align: center; padding: 40px; background-color: #f8f9fa; border-radius: 5px;">
                            <i class="fas fa-inbox" style="font-size: 48px; color: #6c757d; margin-bottom: 20px;"></i>
                            <h4>No contact submissions found</h4>
                            <p style="color: #6c757d;">Contact form submissions will appear here once visitors start contacting you.</p>
                        </div>
                    {% endif %}
                </div>
                {% else %}
                    <div class="form-section">
                        <h3>Welcome to the Admin Panel!</h3>
                        <p>Use the sidebar to navigate and manage your website content.</p>
                    </div>
                {% endif %}
            </div>
        </main>
    </div>
<script>
   // Updated JavaScript functions for admin panel

    // Founders Management
    let founderCounter = 0; // Will be set based on existing founders

function addFounder() {
    const container = document.getElementById('foundersContainer');
    const newIndex = container.children.length;
    
    const founderItem = document.createElement('div');
    founderItem.className = 'founder-item';
    founderItem.setAttribute('data-index', newIndex);
    
    founderItem.innerHTML = `
        <div class="form-group" style="flex: 1;">
            <label>Founder Name</label>
            <input type="text" name="founder_name" required>
            
            <label>Founder Role</label>
            <input type="text" name="founder_role" required>
            
            <label>Founder Description</label>
            <textarea name="founder_description" rows="3" required></textarea>
            
            <label>Founder Image</label>
            <input type="file" name="founder_image_${newIndex}" accept="image/*" onchange="previewFounderImage(this, ${newIndex})">
            <input type="hidden" name="existing_founder_image" value="">
        </div>
        <div class="founder-image-preview">
            <img src="/static/images/placeholder-person.jpg" alt="No image" id="founder_preview_${newIndex}" style="opacity: 0.5;">
        </div>
        <button type="button" class="remove-btn" onclick="removeFounder(this)">
            <i class="fas fa-trash"></i>
        </button>
    `;
    
    container.appendChild(founderItem);
}

    function removeFounder(button) {
        const founderItem = button.closest('.founder-item');
        const container = document.getElementById('foundersContainer');
        
        // Always allow removal - let backend handle validation
        founderItem.remove();
        
        // If no founders left, add an empty one
        if (container.children.length === 0) {
            addFounder();
        }
    }

    // Work Items Management
    function addWorkItem() {
        const container = document.getElementById('workWithContainer');
        const newWorkItem = document.createElement('div');
        newWorkItem.className = 'work-item';
        newWorkItem.innerHTML = `
            <div class="form-group" style="flex: 1;">
                <label>Icon (e.g., fa-solid fa-code)</label>
                <input type="text" name="work_icon" required>
                <label>Title</label>
                <input type="text" name="work_title" required>
                <label>Description</label>
                <textarea name="work_description" rows="3" required></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="removeWorkItem(this)">
                <i class="fas fa-trash"></i>
            </button>
        `;
        container.appendChild(newWorkItem);
    }

    function removeWorkItem(button) {
        const workItem = button.closest('.work-item');
        const container = document.getElementById('workWithContainer');
        
        // Always allow removal
        workItem.remove();
        
        // If no items left, add an empty one
        if (container.children.length === 0) {
            addWorkItem();
        }
    }

    // Team Members Management
    let teamMemberCounter = 0; // Will be set based on existing members

    function addTeamMember() {
        const container = document.getElementById('teamMembersContainer');
        const newMember = document.createElement('div');
        newMember.className = 'team-member-item';
        newMember.innerHTML = `
            <div class="form-group" style="flex: 1;">
                <label>Member Name</label>
                <input type="text" name="team_member_name" required>
                <label>Member Position</label>
                <input type="text" name="team_member_position" required>
                <label>Member Description</label>
                <textarea name="team_member_description" rows="3" required></textarea>
                <label>Member Image</label>
                <input type="file" name="team_member_image_${teamMemberCounter}" accept="image/*">
            </div>
            <button type="button" class="remove-btn" onclick="removeTeamMember(this)">
                <i class="fas fa-trash"></i>
            </button>
        `;
        container.appendChild(newMember);
        teamMemberCounter++;
    }

    function removeTeamMember(button) {
        const memberItem = button.closest('.team-member-item');
        const container = document.getElementById('teamMembersContainer');
        
        // Always allow removal
        memberItem.remove();
        
        // If no members left, add an empty one
        if (container.children.length === 0) {
            addTeamMember();
        }
    }

    // Client Logos Management
    function addClientLogo() {
        const container = document.getElementById('clientLogosContainer');
        const logoCount = container.children.length + 1;
        const newLogo = document.createElement('div');
        newLogo.className = 'client-logo-item';
        newLogo.innerHTML = `
            <div class="form-group" style="flex: 1;">
                <label for="clientLogo${logoCount}">Client Logo ${logoCount}</label>
                <input type="file" id="clientLogo${logoCount}" name="clientLogo${logoCount}" accept="image/*">
            </div>
            <button type="button" class="remove-btn" onclick="removeClientLogo(this)">
                <i class="fas fa-trash"></i>
            </button>
        `;
        container.appendChild(newLogo);
    }

    function removeClientLogo(button) {
        const logoItem = button.closest('.client-logo-item');
        logoItem.remove();
    }

    // Services Management
    let serviceCounter = 1;
    
    function addService() {
        serviceCounter++;
        const container = document.getElementById('servicesContainer');
        const newService = document.createElement('div');
        newService.className = 'service-item';
        newService.innerHTML = `
            <div class="form-group">
                <label>Service Heading</label>
                <input type="text" name="service_head" required>
                
                <label>Service Icon</label>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <input type="text" name="service_icon" value="fas fa-cogs" placeholder="fas fa-cogs" required style="flex: 1;" onchange="updateIconPreview(this)">
                    <div class="icon-preview" style="min-width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; background: #f5f5f5; border-radius: 5px; border: 1px solid #ddd;">
                        <i class="fas fa-cogs" style="font-size: 18px; color: #333;"></i>
                    </div>
                </div>
                <small style="color: #666; font-size: 12px;">Examples: fas fa-laptop-code, fas fa-mobile-alt, fas fa-cloud, fas fa-shield-alt</small>
                
                <label>Service Description</label>
                <textarea name="service_desc" rows="3" required></textarea>
            </div>
            <button type="button" class="remove-btn" onclick="removeService(this)"><i class="fas fa-trash"></i></button>
        `;
        container.appendChild(newService);
    }
    
    function removeService(button) {
        const serviceItem = button.closest('.service-item');
        const container = document.getElementById('servicesContainer');
        if (container.children.length > 1) {
            serviceItem.remove();
        } else {
            alert('At least one service must remain.');
        }
    }
    
    function updateIconPreview(input) {
        const preview = input.parentNode.querySelector('.icon-preview i');
        if (preview && input.value.trim()) {
            preview.className = input.value.trim();
        }
    }
    
    // Common icon suggestions
    const commonIcons = [
        { class: 'fas fa-laptop-code', name: 'Web Development' },
        { class: 'fas fa-mobile-alt', name: 'Mobile Apps' },
        { class: 'fas fa-cloud', name: 'Cloud Services' },
        { class: 'fas fa-shield-alt', name: 'Security' },
        { class: 'fas fa-chart-line', name: 'Analytics' },
        { class: 'fas fa-robot', name: 'AI/ML' },
        { class: 'fas fa-microchip', name: 'IoT/Hardware' },
        { class: 'fas fa-palette', name: 'Design/UI' },
        { class: 'fas fa-cogs', name: 'Engineering' },
        { class: 'fas fa-rocket', name: 'Innovation' },
        { class: 'fas fa-brain', name: 'Consulting' },
        { class: 'fas fa-database', name: 'Data Solutions' }
    ];

    // Add icon suggestions dropdown (optional enhancement)
    function createIconSuggestions(input) {
        const suggestions = document.createElement('div');
        suggestions.className = 'icon-suggestions';
        suggestions.style.cssText = `
            position: absolute;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            width: 100%;
            display: none;
        `;
        
        commonIcons.forEach(icon => {
            const item = document.createElement('div');
            item.style.cssText = 'padding: 8px 12px; cursor: pointer; display: flex; align-items: center; gap: 10px;';
            item.innerHTML = `<i class="${icon.class}"></i> <span>${icon.class}</span> <small style="color: #666;">${icon.name}</small>`;
            item.addEventListener('click', () => {
                input.value = icon.class;
                updateIconPreview(input);
                suggestions.style.display = 'none';
            });
            item.addEventListener('mouseenter', () => item.style.backgroundColor = '#f5f5f5');
            item.addEventListener('mouseleave', () => item.style.backgroundColor = 'white');
            suggestions.appendChild(item);
        });
        
        return suggestions;
    }

    // Initialize counters on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Set initial counters based on existing items
        const existingFounders = document.querySelectorAll('#foundersContainer .founder-item');
        founderCounter = existingFounders.length;
        
        const existingMembers = document.querySelectorAll('#teamMembersContainer .team-member-item');
        teamMemberCounter = existingMembers.length;
        
        const existingServices = document.querySelectorAll('#servicesContainer .service-item');
        serviceCounter = existingServices.length;
        
        // Add event listeners for icon preview updates
        document.querySelectorAll('input[name="service_icon"]').forEach(input => {
            input.addEventListener('input', function() {
                updateIconPreview(this);
            });
        });
        
        console.log('Admin panel initialized:', {
            founderCounter,
            teamMemberCounter,
            serviceCounter
        });
    });
</script>
</body>
</html>